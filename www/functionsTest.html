<!DOCTYPE html>
<!--
Copyright (c) 2012-2014 Adobe Systems Incorporated. All rights reserved.
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements. See the NOTICE file
distributed with this work for additional information
regarding copyright ownership. The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License. You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the
specific language governing permissions and limitations
under the License.
-->
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="msapplication-tap-highlight" content="no" />
		<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="css/jquery.mobile.external-png-1.4.5.css" />
		<link rel="stylesheet" type="text/css" href="css/jquery.mobile.icons-1.4.5.css" />
		<link rel="stylesheet" type="text/css" href="css/jquery.mobile.inline-png-1.4.5.css" />
		<link rel="stylesheet" type="text/css" href="css/jquery.mobile.inline-svg-1.4.5.css" />
		<link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.4.5.css" />
		<link rel="stylesheet" type="text/css" href="css/jquery.mobile.theme-1.4.5.css" />
		<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.css" />
		<title>Functions testing</title>
		<script type="text/javascript" src="cordova.js"></script>
		<script type="text/javascript" src="phonegap.js"></script>
		<script type="text/javascript" src="js/index.js"></script>
		<script type="text/javascript" src="js/jquery-1.11.2.js"></script>
		<script type="text/javascript" src="js/jquery.mobile-1.4.5.js"></script>
		<script type="text/javascript">
			//global variables
			var quiz1 = [];
			var numAlreadyPicked = [];
			var gradingArray = [];
			var gradingImgArray = [];
			var correct = [];
			var choice, startingFrom;
			//used for going to the different questions
			var questNum;
			//counter is used to iterate through grading arrays
			var counter;
			var correctArrayCounter;
			//get values from options
			var typeButtonVal;
			var displayButtonVal;
			var questionButtonVal;
			//filepath
			var functionsFilePath;
			//start from question option
			var start;
			
			
			function endOfFunctionsButton() {
				window.location = './index.html'
			};
			//randomNum must be hard coded to a number as there is no way for JScript to count the number of pictures in a folder
			//setting a limit of 10 pictures
			//all picutures must not be related in any way (ex. knife and sword could both cut you---> not good)
			function makeImageArray(correctImg) {
				var i, j, randomNum;
				quiz1[0] = functionsFilePath + correctImg + '.jpg';
				numAlreadyPicked[0] = correctImg;
				for ( i = 1; i < quiz1.length; i++) {
					//pick random number
					randomNum = Math.floor(Math.random() * 10)
					//for loop used to iterate through number tracking array to find duplicates
					for ( j = 0; j < numAlreadyPicked.length; j++) {
						if (randomNum == correctImg || randomNum == numAlreadyPicked[j]) {
							randomNum = Math.floor(Math.random() * 10)
							j = 0;
						}
					}
					quiz1[i] = functionsFilePath + randomNum + '.jpg';
					numAlreadyPicked[i] = randomNum;
				}
				//sort array for random order
				quiz1.sort();
				numAlreadyPicked.sort();
				
				//display images
				document.write("<ul>")
				for ( j = 0; j < quiz1.length; j++) {
					console.log("quiz length in displayImageArray: "+quiz1.length);
					document.write("<li class='imgChoices'"+counter+"' id='potentialChoice" + j + "' value ='" + numAlreadyPicked[j] + "'><a href='#functionsQ" + questNum + "'><img src='" + quiz1[j] + "' width='150' height='100' class='imgSpacing'/></a></li>");
				}
				document.write("</ul>")
			}

			function displayImageArray(questionNum, num) {
				document.write("<ul>")
				for ( u = 0; u < quiz1.length; u++) {
					console.log("quiz length in displayImageArray: "+quiz1.length);
					document.write("<li class='imgChoices'"+counter+"' id='potentialChoice" + u + "' value ='" + numAlreadyPicked[u] + "'><a href='#functionsQ" + questionNum + "'><img src='" + quiz1[u] + "' width='150' height='100' class='imgSpacing'/></a></li>");
				}
				document.write("</ul>")
			}

			function gradeQuestion(imgVal, endTest) {
				if (endTest == true) {
					//create a text file with grades
					//store text file to a folder to be ready to be emailed
					//just to show grading works, print the grades (refresh to end the section)
					printGrades();
					//endOfFunctionsButton();
				} else if (imgVal == correct[counter]) {
					gradingArray[counter] = "Correct";
					gradingImgArray[counter] = functionsFilePath + imgVal + '.jpg';
				} else {
					gradingArray[counter] = "Incorrect";
					gradingImgArray[counter] = functionsFilePath + imgVal + '.jpg';
				}
				counter++;
			}

			function setCorrectArray(num) {
				correct[correctArrayCounter] = num;
				correctArrayCounter++;
			}

			function printGrades() {
				var z, y;
				document.write("Scores: <br>");
				for ( z = 0; z < gradingArray.length; z++) {
					document.write("Question " + (z + 1) + ": " + gradingArray[z] + "<br>");
				}
				document.write("<br>grading image array content: <br>");
				for ( y = 0; y < gradingImgArray.length; y++) {
					document.write("Question " + (y + 1) + " image selected: " + "<img src='" + gradingImgArray[y] + "' width='150' height='100' class='imgSpacing'/> <br>");
				}
			}

			function setEnd() {
				var end = true;
				gradeQuestion(-1, end);
			}

			function incrementQuestNum() {
				questNum++;
			}
			
			function incrementCounter(){
				counter++;
			}
			
			function setValues(){
					quiz1.length = displayButtonVal;
					console.log("quiz1 length: "+quiz1.length);
					numAlreadyPicked.length = displayButtonVal;
					console.log("nAP length: "+numAlreadyPicked.length);
					//get value for symbols or realistic images
					choice = typeButtonVal;
					console.log("choice: "+choice);
					startingFrom = questionButtonVal;
					console.log("q to start from: "+startingFrom);
					//grading arrays lengths set to 10 to match amount of questions
					gradingArray.length = 10;
					gradingImgArray.length = 10;
					correct.length = 10;
					//set filepath used for pictures
					functionsFilePath = 'img/testImages/functionsTestImg/' + choice + '/';
					console.log("funcFilePath: " + functionsFilePath);
					//set which question to start on
					start = "#functionsQ" + startingFrom;
					console.log("start: " + start);
					document.getElementById("startTheTest").setAttribute("href", start);
					counter = (startingFrom - 1);
					correctArrayCounter = (startingFrom - 1);
					questNum = (++startingFrom);
					console.log("counter: " + counter);
					console.log("correctArrayCounter: " + correctArrayCounter);
					console.log("questNum: " + questNum);
			}
		</script>
	</head>
	<body>
		<div data-role="page" align="center" id="testOptions">
			<div data-role="content">
				<div data-role="fieldcontain">
					<label>Choose how many images to choose from:</label>
					<select id="imgDisplaySize">
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
						<option value="6">6</option>
						<option value="7">7</option>
						<option value="8">8</option>
					</select>
					
				</div>
				
				
				<div data-role="fieldcontain">
					<label>Choose realistic or symbolic pictures to display:</label>
					<select id="typeOfImg" >
						<option value="realistic">Realistic</option>
						<option value="symbols">Symbols</option>
					</select>
					
				</div>
				
				
				<div data-role="fieldcontain">
					<label>Start from question:</label>
					<select id="questionStartFrom">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
						<option value="6">6</option>
						<option value="7">7</option>
						<option value="8">8</option>
						<option value="9">9</option>
						<option value="10">10</option>
					</select>
					
				</div>
				<input type="button" value="set the values" id="valuesButton"></button>
				<script>
					document.write("<a href='' id='startTheTest" + questionButtonVal + "' data-role='button'>Start</a>");
				</script>
				
				<script>
					$("#valuesButton").click(function(){
						
	    				displayButtonVal = $("#imgDisplaySize option:selected").val()
	    				typeButtonVal = $("#typeOfImg option:selected").val()
	    				questionButtonVal = $("#questionStartFrom option:selected").val()
	    				
	    				console.log("val from numOfImages: " + displayButtonVal);
	    				console.log("val from typeOfImg: " + typeButtonVal);
	    				console.log("val from startOn: " + questionButtonVal);
	    				
	    				setValues();
    				});
    				
    				
    				
    				
    				// $("#typeButton").click(function(){
    				// typeButtonVal = $("#typeOfImg option:selected").val()
    				// console.log("val from typeOfImg: " + typeButtonVal);
    				// });
    				
    				// $("#questionButton").click(function(){
    				// questionButtonVal = $("#questionStartFrom option:selected").val()
    				// console.log("val from numOfImages: " + questionButtonVal);
    				// });
					// console.log("val from numOfImages outside: " + questionButtonVal);
				
					//get number of images to display and which type of pictures
					// var numImgDisplay = document.getElementById("imgDisplaySize");
					// var realOrSymbol = document.getElementById("typeOfImg");
					// var startFrom = document.getElementById("questionStartFrom");
					//set lengths for arrays
					
				</script>
			</div>
		</div>
		<div data-role="page" align="center" id="functionsQ1">
			<div data-role="header">
				<h1 style="font-size: 20px">Point to the one that cuts</h1>
			</div>
			<div data-role="content">
				<div>
					<script>
					
					
					
						//console.log("if statement worked")
						$("#startTheTest1").click(function(){
						var q1Img = counter;
						setCorrectArray(q1Img);
						makeImageArray(q1Img);
						incrementCounter();
						//displayImageArray(questNum, q1Img);
						//console.log("quiz1.length: "+quiz1.length);
						//incrementQuestNum();
						});
					
					
					
					
						// //send number for right image
						// var q1Img = 4;
						// setCorrectArray(q1Img);
						// makeImageArray(q1Img);
						// displayImageArray(questNum, q1Img);
						// console.log("quiz1.length: "+quiz1.length);
						// incrementQuestNum();
					</script>
				</div>
			</div>
			<div data-role="footer">
				<button onclick="setEnd();">Email</button>
				<input type="button" value="something" id="valuesButton"></button>
			</div>
		</div>
		
		<div data-role="page" align="center" id="functionsQ11">
			<div data-role="header">
				<h1 style="font-size: 20px">Results of the Test</h1>
			</div>
			<div data-role="content">
				<div>
					Student: <span id="studentName"></span>
					<script>
						$('#studentName').html(window.sessionStorage.getItem("name"));
					</script>
					<button onclick="setEnd();">
						grade
					</button>
				</div>
			</div>
			<div data-role="footer">
				<button onclick="endOfFunctionsButton();">
					((End of Section))
				</button>
			</div>
		</div>
		
		
		
		
	</body>
</html>