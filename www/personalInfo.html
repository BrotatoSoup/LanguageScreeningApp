<!DOCTYPE html>
<!--
    Copyright (c) 2012-2014 Adobe Systems Incorporated. All rights reserved.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.external-png-1.4.5.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.icons-1.4.5.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.inline-png-1.4.5.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.inline-svg-1.4.5.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.theme-1.4.5.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.css" />
        <link rel="stylesheet" href="themes/appTheme.min.css" />
		<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.4.5.css" />
        <title>Personal Info</title>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/jquery-1.11.2.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.4.5.js"></script>
        <script type="text/javascript"> 
        	var startingFrom;
        	var counter;  
        	var answerCounter;  
        	//test notes variables and counter
			var testNotes = "";
			var finalTestNotes = "";
			var noteCount;
			//answers stored in array
			var answerArray = [];
			var headerArray = [];
			//email string
			var emailString = "Personal Info Test<br>Student: " + window.sessionStorage.getItem("name") + "<br>";
                
            function endOfPersonalInfoButton(){ 
            	sessionStorage.clear();
            	window.location = './index.html' 
            };
            function backToIndex(){
            	window.location = './index.html'
            };

			function setEnd() {
				var end = true;
				updateValues(end);
			}
			
			function updateValues(endTest) {
				//update notes
				testNotes = $("#testNotes"+noteCount).val();
				finalTestNotes += " " + testNotes;
				//set question in header to array
				headerArray[counter] = $("#header" + (counter+1)).text();
				console.log("headerArray" + counter + ": " +headerArray[counter]);
				console.log("finalTestNotes so far: "+finalTestNotes);
				if (endTest == true) {
					window.location.href = "mailto:?Subject&body="+ printGrades();
					//reveal endtest button and hide email and next question buttons
					document.getElementById("hideaway"+noteCount).style.display='block';
					document.getElementById("emailBtn"+noteCount).style.display='none';
					document.getElementById("nxtQuestionBtn"+noteCount).style.display='none';
				} else{
					answerArray[counter] = $("#answer" + answerCounter).val();
				} 
				noteCount++;
				counter++;
				answerCounter++;
				console.log("counter in updateValues: " + counter)
				console.log("answerCounter: "+ answerCounter);
			}
			
			function printGrades() {
				var z;
				for ( z = 0; z < answerArray.length; z++) {
					if(headerArray[z] != null){
						emailString += "Question " + (z + 1) + ": " + headerArray[z] + "<br>Answer: "+ answerArray[z] + "<br>";
					}
				}
				emailString += "<br>NOTES: " + finalTestNotes;
				console.log("emailString: " + emailString);
				return emailString;
			}
        </script>
        
    </head>

<body>
	<div data-role="page" align="center" id="start">
			<div data-role="content">
				<a href="" id="startTheTest" data-role="button">Start</a>
				<span class="buttonSpacing"><a data-role="button" id="backToIndex" onclick="backToIndex();">Back To Start</a></span>
				<script>
					
					//get starting from
					startingFrom = window.sessionStorage.getItem("startFromQuestion");
					//set lengths of arrays
					answerArray.length = 10;
					headerArray.length = 10;
					//set which question to start on
					var start = "#personalQ" + startingFrom;
					console.log("start: " + start);
					document.getElementById("startTheTest").setAttribute("href", start);
					counter = (startingFrom - 1);
					answerCounter = startingFrom;
					noteCount = startingFrom;
					console.log("counter: " + counter);
					console.log("answer count: "+answerCounter);
					console.log("noteCount: "+noteCount);
				</script>
			</div>
		</div>
	
	
	
  <div data-role="page" id="personalQ1" align="center">
    <div data-role="header">
  		<h1 id="header1" style="font-size: 20px">1. What is your name?</h1>
  	</div>
  	<div data-role="content">	
  		<textarea id="answer1"></textarea>
  		
  			<a data-role="button" onclick="take1Picture();">Take a Picture</a>
        	<a data-role="button" onclick="get1PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        	<img id="Q1Image" width="200px" height="250px" style="display: none" src="">
        	<script>
        		function get1PhotoFromLibrary(){
        			navigator.camera.getPicture(on1Success, on1Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        				});
        		}
        		function take1Picture(){
        			navigator.camera.getPicture(on1Success, on1Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				});
        		}
        		function on1Success(imageData){
        			var image = document.getElementById("Q1Image");
        			image.src = "data:image/jpeg;base64," + imageData;
        			image.style.display = 'block';
        		}
        		function on1Fail(message){
        			alert("failed because: " + message);
        		}
        		
        	</script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn1" style="display: block;"><a href="#personalQ2" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes1" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn1" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway1" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>

  </div>
  
  
  <div data-role="page" id="personalQ2" align="center">
    <div data-role="header">
  		<h1 id="header2" style="font-size: 20px">2. How old are you?</h1>
  	</div>
  	<div data-role="content">	  		
  		<textarea id="answer2"></textarea>
  		
  			<a data-role="button" onclick="take2Picture();">Take a Picture</a>
        	<a data-role="button" onclick="get2PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        	<img id="Q2Image" width="200px" height="250px" style="display: none" src="">
        	<script>
        		function get2PhotoFromLibrary(){
        			navigator.camera.getPicture(on2Success, on2Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        				});
        		}
        		function take2Picture(){
        			navigator.camera.getPicture(on2Success, on2Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				});
        		}
        		function on2Success(imageData){
        			var image = document.getElementById("Q2Image");
        			image.src = "data:image/jpeg;base64," + imageData;
        			image.style.display = 'block';
        		}
        		function on2Fail(message){
        			alert("failed because: " + message);
        		}
        	</script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn2" style="display: block;"><a href="#personalQ3" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes2" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn2" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway2" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>

  </div>
  
  
  <div data-role="page" id="personalQ3" align="center">
    <div data-role="header">
  		<h1 id="header3" style="font-size: 20px">3. Where do you go to school?</h1>
  	</div>
  	<div data-role="content">	
  		<textarea id="answer3"></textarea>
  		
  			<a data-role="button" onclick="take3Picture();">Take a Picture</a>
        	<a data-role="button" onclick="get3PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        	<img id="Q3Image" width="200px" height="250px" style="display: none" src="">
        	<script>
        		function get3PhotoFromLibrary(){
        			navigator.camera.getPicture(on3Success, on3Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        				});
        		}
        		function take3Picture(){
        			navigator.camera.getPicture(on3Success, on3Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				});
        		}
        		function on3Success(imageData){
        			var image = document.getElementById("Q3Image");
        			image.src = "data:image/jpeg;base64," + imageData;
        			image.style.display = 'block';
        		}
        		function on3Fail(message){
        			alert("failed because: " + message);
        		}
        	</script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn3" style="display: block;"><a href="#personalQ4" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes3" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn3" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway3" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>

  </div>
  
  
  <div data-role="page" id="personalQ4" align="center">
    <div data-role="header">
  		<h1 id="header4" style="font-size: 20px">4. Where do you live?</h1>
  	</div>
  	<div data-role="content">	
  		<textarea id="answer4"></textarea>
  		
  			<a data-role="button" onclick="take4Picture();">Take a Picture</a>
        	<a data-role="button" onclick="get4PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        	<img id="Q4Image" width="200px" height="250px" style="display: none" src="">
        	<script>
        		function get4PhotoFromLibrary(){
        			navigator.camera.getPicture(on4Success, on4Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        				});
        		}
        		function takeLivePicture(){
        			navigator.camera.getPicture(on4Success, on4Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				});
        		}
        		function on4Success(imageData){
        			var image = document.getElementById("Q4Image");
        			image.src = "data:image/jpeg;base64," + imageData;
        			image.style.display = 'block';
        		}
        		function on4Fail(message){
        			alert("failed because: " + message);
        		}
        	</script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn4" style="display: block;"><a href="#personalQ5" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes4" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn4" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway4" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>

  </div>
  
  
  <div data-role="page" id="personalQ5" align="center">
    <div data-role="header">
  		<h1 id="header5" style="font-size: 20px">5. When is your birthday?</h1>
  	</div>
  	<div data-role="content">	
  		<textarea id="answer5"></textarea>
  		
  			<a data-role="button" onclick="take5Picture();">Take a Picture</a>
        	<a data-role="button" onclick="get5PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        	<img id="Q5Image" width="200px" height="250px" style="display: none" src="">
        	<script>
        		function get5PhotoFromLibrary(){
        			navigator.camera.getPicture(on5Success, on5Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        				});
        		}
        		function take5Picture(){
        			navigator.camera.getPicture(on5Success, on5Fail, {quality: 50,
        				destinationType: Camera.DestinationType.DATA_URL,
        				});
        		}
        		function on5Success(imageData){
        			var image = document.getElementById("Q5Image");
        			image.src = "data:image/jpeg;base64," + imageData;
        			image.style.display = 'block';
        		}
        		function on5Fail(message){
        			alert("failed because: " + message);
        		}
        	</script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn5" style="display: block;"><a href="#personalQ6" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes5" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn5" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway5" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>

  </div>
  
  
  <div data-role="page" id="personalQ6" align="center">
  	<div data-role="header">
  		<h1 id="header6" style="font-size: 20px">6. Are you a boy?</h1>
  	</div>
  	<div data-role="content">
  		<textarea id="answer6"></textarea>
  		
  		<a data-role="button" onclick="take6Picture();">Take a Picture</a>
        <a data-role="button" onclick="get6PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        <img id="Q6Image" width="200px" height="250px" style="display: none" src="">
        <script>
        	function get6PhotoFromLibrary(){
        		navigator.camera.getPicture(on6Success, on6Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        			});
        	}
        	function take6Picture(){
        		navigator.camera.getPicture(on6Success, on6Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			});
        	}
        	function on6Success(imageData){
        		var image = document.getElementById("Q6Image");
        		image.src = "data:image/jpeg;base64," + imageData;
        		image.style.display = 'block';
        	}
        	function on6Fail(message){
        		alert("failed because: " + message);
        	}
        </script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn6" style="display: block;"><a href="#personalQ7" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes6" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn6" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway6" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>
  	
  </div>
  
  
  <div data-role="page" id="personalQ7" align="center">
  	<div data-role="header">
  		<h1 id="header7" style="font-size: 20px">7. What month is it?</h1>
  	</div>
  	<div data-role="content">
  		<textarea id="answer7"></textarea>
  		
  		<a data-role="button" onclick="take7Picture();">Take a Picture</a>
        <a data-role="button" onclick="get7PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        <img id="Q7Image" width="200px" height="250px" style="display: none" src="">
  		<script>
        	function get7PhotoFromLibrary(){
        		navigator.camera.getPicture(on7Success, on7Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        			});
        	}
        	function take7Picture(){
        		navigator.camera.getPicture(on7Success, on7Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			});
        	}
        	function on7Success(imageData){
        		var image = document.getElementById("Q7Image");
        		image.src = "data:image/jpeg;base64," + imageData;
        		image.style.display = 'block';
        	}
        	function on7Fail(message){
        		alert("failed because: " + message);
        	}
        </script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn7" style="display: block;"><a href="#personalQ8" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes7" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn7" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway7" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>
  	
  </div>
  
  
  <div data-role="page" id="personalQ8" align="center">
  	<div data-role="header">
  		<h1 id="header8" style="font-size: 20px">8. What day is it?</h1>
  	</div>
  	<div data-role="content">
  		<textarea id="answer8"></textarea>
  		
  		<a data-role="button" onclick="take8Picture();">Take a Picture</a>
        <a data-role="button" onclick="get8PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        <img id="Q8Image" width="200px" height="250px" style="display: none" src="">
  		<script>
        	function get8PhotoFromLibrary(){
        		navigator.camera.getPicture(on8Success, on8Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        			});
        	}
        	function take8Picture(){
        		navigator.camera.getPicture(on8Success, on8Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			});
        	}
        	function on8Success(imageData){
        		var image = document.getElementById("Q8Image");
        		image.src = "data:image/jpeg;base64," + imageData;
        		image.style.display = 'block';
        	}
        	function on8Fail(message){
        		alert("failed because: " + message);
        	}
        </script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn8" style="display: block;"><a href="#personalQ9" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes8" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn8" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway8" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>
  	
  </div>
  
  
  <div data-role="page" id="personalQ9" align="center">
  	<div data-role="header">
  		<h1 id="header9" style="font-size: 20px">9. What year is it?</h1>
  	</div>
  	<div data-role="content">
  		<textarea id="answer9"></textarea>
  		
  		<a data-role="button" onclick="take9Picture();">Take a Picture</a>
        <a data-role="button" onclick="get9PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        <img id="Q9Image" width="200px" height="250px" style="display: none" src="">
  		<script>
        	function get9PhotoFromLibrary(){
        		navigator.camera.getPicture(on9Success, on9Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        			});
        	}
        	function take9Picture(){
        		navigator.camera.getPicture(on9Success, on9Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			});
        	}
        	function on9Success(imageData){
        		var image = document.getElementById("Q9Image");
        		image.src = "data:image/jpeg;base64," + imageData;
        		image.style.display = 'block';
        	}
        	function on9Fail(message){
        		alert("failed because: " + message);
        	}
        </script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn9" style="display: block;"><a href="#personalQ10" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes9" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn9" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway9" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>
  	
  </div>
  
  
  <div data-role="page" id="personalQ10" align="center">
  	<div data-role="header">
  		<h1 id="header10" style="font-size: 20px">10. Where are you?</h1>
  	</div>
  	<div data-role="content">
  		<textarea id="answer10"></textarea>
  		
  		<a data-role="button" onclick="take10Picture();">Take a Picture</a>
        <a data-role="button" onclick="get10PhotoFromLibrary();">Get a Picture From Library</a></span><br />
        <img id="Q10Image" width="200px" height="250px" style="display: none" src="">
  		<script>
        	function get10PhotoFromLibrary(){
        		navigator.camera.getPicture(on10Success, on10Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        			});
        	}
        	function take10Picture(){
        		navigator.camera.getPicture(on10Success, on10Fail, {quality: 50,
        			destinationType: Camera.DestinationType.DATA_URL,
        			});
        	}
        	function on10Success(imageData){
        		var image = document.getElementById("Q10Image");
        		image.src = "data:image/jpeg;base64," + imageData;
        		image.style.display = 'block';
        	}
        	function on10Fail(message){
        		alert("failed because: " + message);
        	}
        </script>
  	</div>
  	<div data-role="footer">
  		<span class="buttonSpacing" id="nxtQuestionBtn10" style="display: block;"><a href="#personalQ11" data-role="button" onclick="updateValues();">next question</a></span>
		<textarea id="testNotes10" placeholder="Enter notes here"></textarea>
  		<span id="emailBtn10" style="display: block;"><button onclick="setEnd();">Email</button></span>
  		<span class="buttonSpacing" id="hideaway10" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
  	</div>
  	
  </div>
  
  
  <div data-role="page" align="center" id="personalQ11">
			<div data-role="header">
				<h1 style="font-size: 20px">Congratulations <span id="studentName"></span>!</h1>
			</div>
			<div data-role="content">
				<div>
					The test is over.<br />
					Be sure to email the results before exiting the app.
					<script>
						$('#studentName').html(window.sessionStorage.getItem("name"));
					</script>
				</div>
			</div>
			<div data-role="footer">
				<textarea id="testNotes11" placeholder="Any final notes?"></textarea>
  				<span id="emailBtn11" style="display: block;"><button onclick="setEnd();">Email</button></span>
  				<span class="buttonSpacing" id="hideaway11" style="display: none;"><a data-role="button" onclick="endOfPersonalInfoButton();">End Test</a></span>
			</div>
		</div>
</body>
</html>
